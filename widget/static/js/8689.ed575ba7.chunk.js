"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[8689],{88689:(e,n,t)=>{t.r(n),t.d(n,{default:()=>w});var i=t(89379),a=t(9950),l=t(14478),s=t(73878),o=t(52867),r=t(80415),d=t(66345),u=t(44414);const h=a.lazy((()=>t.e(2804).then(t.bind(t,2804)))),c=a.lazy((()=>t.e(4121).then(t.bind(t,14121)))),g=a.lazy((()=>t.e(1422).then(t.bind(t,51422)))),v=a.lazy((()=>t.e(56).then(t.bind(t,70056)))),p=a.lazy((()=>Promise.all([t.e(8400),t.e(6337)]).then(t.bind(t,65518))));class m extends a.PureComponent{constructor(){super(),this.handleResize=()=>{var e,n,t,i;this.containerRef.current&&this.setState({containerSize:{width:null===this||void 0===this||null===(e=this.containerRef)||void 0===e||null===(n=e.current)||void 0===n?void 0:n.offsetWidth,height:null===this||void 0===this||null===(t=this.containerRef)||void 0===t||null===(i=t.current)||void 0===i?void 0:i.offsetHeight}})},this.state={containerSize:{width:null,height:null},parentID:""},this.containerRef=a.createRef()}componentDidMount(){var e,n,t,i,a;((0,o.j1)(this.props.wall.Personalization.widgetTheme),window.addEventListener("resize",this.handleResize),null!==this&&void 0!==this&&null!==(e=this.containerRef)&&void 0!==e&&e.current)&&this.setState({containerSize:{width:null===this||void 0===this||null===(n=this.containerRef)||void 0===n||null===(t=n.current)||void 0===t?void 0:t.offsetWidth,height:null===this||void 0===this||null===(i=this.containerRef)||void 0===i||null===(a=i.current)||void 0===a?void 0:a.offsetHeight}})}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}componentDidUpdate(){let e=document.querySelector(".tb_app_container"),n=o.wV?o.wV:e.parentNode.id;this.setState({parentID:n})}render(){var e,n,t,l,s,m,w,f,S,b;const{wall:j,reviewFilters:k,webFilters:x,postData:z,languageSetting:B,filter_tags:_}=this.props,R=!!(j.Banner&&Object.keys(j.Banner).length>0),D=R?(0,o.Gv)(j.Banner)?j.Banner:j.Banner[0]:{},I=!!(R||j.CustomBanner&&Object.keys(j.CustomBanner).length>0&&(1===(null===D||void 0===D?void 0:D.status)&&1===(null===D||void 0===D?void 0:D.banner_position)||1===(null===D||void 0===D?void 0:D.status)&&1===(null===D||void 0===D?void 0:D.banner_position)||1===(null===j||void 0===j||null===(e=j.BannerImage)||void 0===e?void 0:e.status))),y=!(!R||1!==D.status||2!==D.banner_position),H=d.uS?![55,60,16,47,57].includes(j.Personalization.widgetTheme):![55,52,60,16,47,57,61].includes(j.Personalization.widgetTheme),P=R&&1===(null===D||void 0===D?void 0:D.status)&&6==(null===D||void 0===D?void 0:D.bannerType)&&0===j.Personalization.filterStatus&&![57,84].includes(j.Personalization.widgetTheme),F=d.uS?1===j.Personalization.filterStatus:!!(1===j.Personalization.filterStatus&&x&&x.length>1),T=!!(_&&_.length>0);let U=""!=x&&x&&x.length>0?x.map((e=>{let{Network:n}=e;return null===n||void 0===n?void 0:n.id})):null;!d.HY&&null!==j&&void 0!==j&&null!==(n=j.Background)&&void 0!==n&&n.image&&j.Background.image.includes(r.vr)&&(j.Background.image=String(j.Background.image).replace(r.Vy,""));const C=0===(null===j||void 0===j||null===(t=j.Background)||void 0===t?void 0:t.transparent)||null!==j&&void 0!==j&&null!==(l=j.Background)&&void 0!==l&&l.image&&d.uS?{backgroundImage:null!==j&&void 0!==j&&null!==(s=j.Background)&&void 0!==s&&s.image?"url(".concat(null===j||void 0===j||null===(m=j.Background)||void 0===m?void 0:m.image,")"):"",backgroundColor:null===j||void 0===j||null===(w=j.Background)||void 0===w?void 0:w.color}:null,N=!![63,64].includes(j.Personalization.widgetTheme),W=!(1!=(null===j||void 0===j||null===(f=j.ThemeRule)||void 0===f?void 0:f.showReviewHeader)||!N);return(0,u.jsxs)("div",{className:"tb_app_container",style:{minHeight:[47,16,49,55,60,52].includes(j.Personalization.widgetTheme)?"100%":"".concat(this.props.postHeight,"px")},ref:this.containerRef,children:[I?(0,u.jsxs)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[" ",(0,u.jsx)(h,{Banner:j.Banner,BannerImage:j.BannerImage})]}):"",(0,u.jsxs)("div",{className:"tb_app_wrapper",style:C,children:[P&&I||W?(0,u.jsx)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(c,{isHeader:W,reviewFilters:k,appendData:z.appendData,wall:j,languageSetting:B,postData:z})}):null,(null!==j&&void 0!==j&&null!==(S=j.UserRule)&&void 0!==S&&S.on_site_upload&&j.UgcSettings.onsite_status||d.Qy&&j.UgcSettings.onsite_status)&&(d.MH||d.HY&&![63,64,50].includes(j.Personalization.widgetTheme))?(0,u.jsxs)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[" ",(0,u.jsx)(p,{UgcSettings:j.UgcSettings,id:j.Wall.id,tagShopWallId:j.Wall.wallId})," "]}):null,H&&(F||T)?(0,u.jsxs)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[" ",(0,u.jsx)(g,{type:j.Personalization.filter_type,webFilters:x,filter_tags:_,appendData:z.appendData,wall:j,languageSetting:B,postData:z})]}):"",N&&1==(null===j||void 0===j||null===(b=j.ThemeRule)||void 0===b?void 0:b.showReviewList)||!N?(0,u.jsxs)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[" ",(0,u.jsx)(v,(0,i.A)((0,i.A)({},this.props),{},{brandingNetworks:U,containerSize:this.state.containerSize,parentID:this.state.parentID}))]}):null,P&&y?(0,u.jsx)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:(0,u.jsx)(c,{isHeader:W,reviewFilters:k,appendData:z.appendData,wall:j,languageSetting:B,postData:z})}):null]}),y?(0,u.jsxs)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{}),children:[" ",(0,u.jsx)(h,{Banner:j.Banner,BannerImage:j.BannerImage})]}):""]})}}const w=(0,s.Ng)((e=>{if(!0===e.postHeight.manage_height){return{postHeight:e.postHeight.data.replace("px",""),renderId:e.renderId}}return{renderId:e.renderId}}),(e=>({managePostHeight:n=>e((0,l.V3)(n))})))(m)}}]);